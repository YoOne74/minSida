<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="internetsHistoria.css" />
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/zero-md@3?register"
    ></script>
    <title>Internets Historia</title>
  </head>

  <body>
    <header>
      <h1
        style="font-size: 80px; margin-bottom: 1vh; width: 100vw; height: 10vh"
      >
        INTERNETS HISTORIA!
      </h1>
      <p
        style="
          width: 40vw;
          text-align: center;
          margin: auto;
          margin-bottom: 10vh;
        "
      >
        I denna sida kommer jag att skriva lite kort om internets historia
        uppdelat i 7 delar, en för varje årtionde sedan dess skapelse 1960,
        dessa kan du hoppa mellan genom att klicka på nummrerna i sidan!
      </p>
    </header>
    <div class="wrapper" style="height: 1000vh">
      <zero-md
        id="md"
        style="width: 40vw; margin-left: 30vw; position: absolute"
        src="content/Internet historia.md"
      >
        <template data-append>
          <style></style>
        </template>
      </zero-md>

      <div
        style="
          position: sticky;
          right: 20px;
          top: 0;
          overflow: hidden;
          height: 100vh;
          width: 20vw;
        "
        class="toc-container"
      >
      
        <ul id="toc"></ul>
      </div>
    </div>

    <div style="position: fixed; bottom: 18px; left: 20px">
      <a href="../index.html">
        <img
          style="height: 38px; border-radius: 5px"
          src="../shared/badeline2.png"
          alt="bild av badeline"
        />
      </a>
    </div>
    <script>
      //Hela den här funktionen skapar TOC som finns vid vänster

      const md = document.getElementById("md");
      const toc = document.getElementById("toc");

      //Väntar tills zero-md är klar med att rendera markdown filen
      //Sedan loopar man igenom varje h1,h2,h3 tar dess id
      // använder det som text kontent och lägger till det i en lista,
      // använder också vilken nivå man är på för att se till att
      // dem indenteras
      md.addEventListener("zero-md-rendered", () => {
        const headings = md.shadowRoot.querySelectorAll("h1, h2, h3");

        headings.forEach((heading, index) => {
          if (!heading.id) {
            heading.id = "heading-" + index;
          }

          const level = parseInt(heading.tagName.substring(1)); // 1–6

          heading.style = "text-align: center";

          const li = document.createElement("li");
          li.dataset.level = level;

          const link = document.createElement("a");
          link.href = "#" + heading.id;
          link.textContent = heading.textContent;

          li.appendChild(link);

          const indent = (level - 1) * 12;
          li.style.marginLeft = `${indent}px`;

          toc.appendChild(li);
        });
      });
    </script>
  </body>
</html>
